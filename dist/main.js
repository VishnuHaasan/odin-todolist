(()=>{"use strict";class e{constructor(e){this.title=e,this.todos=[]}}class t{constructor(e,t,d,n=1,o){this.title=e,this.description=t,this.duedate=d,this.priority=n,this.notes=o,this.completed=!1,this.hash=this.title+this.description+this.duedate+this.priority+this.notes}}const d=e=>{let t=document.createElement("div"),d=n("Todo","info-header"),o=n("Title: "+e.title,"todoinfoele"),l=n("Description: "+e.description,"todoinfoele"),i=n("Duedate: "+e.duedate,"todoinfoele"),r=n("Priority: "+e.priority,"todoinfoele"),a=n("Notes: "+e.notes,"todoinfoele"),c=document.createElement("button");c.classList.add("button"),c.innerHTML="Delete Todo",c.setAttribute("id","deletetodobutton");let u=document.createElement("button");return u.classList.add("button"),u.innerHTML="Edit Todo",u.setAttribute("id","edittodobutton"),t.appendChild(d),t.appendChild(o),t.appendChild(l),t.appendChild(i),t.appendChild(r),t.appendChild(a),t.appendChild(c),t.appendChild(u),t.setAttribute("id","todoinfocontainer"),t},n=(e,t)=>{let d=document.createElement("p");return d.classList.add(t),d.innerHTML=e,d};let o=(e=>{let t=JSON.parse(localStorage.getItem("projects"));return null==t||0==t.length?[]:t})();console.log(o);const l=()=>{i(),N(),T();let e=(()=>{let e=document.createElement("button");return e.classList.add("button"),e.setAttribute("id","addproject"),e.innerHTML="Add Project",e})();document.getElementById("projectcont").appendChild(e),e.addEventListener("click",r);for(var t=0;t<o.length;t++)c(o[t])},i=()=>{let e=document.getElementById("projectcont");for(;e.firstChild;)e.removeChild(e.lastChild)},r=e=>{(()=>{let e=document.createElement("div");e.classList.add("popup");let t=document.createElement("input");t.setAttribute("id","projecttitle"),t.type="text";let d=document.createElement("button");d.setAttribute("id","addprojectbutton"),d.innerHTML="Submit";let n=document.createElement("button");n.setAttribute("id","close"),n.innerHTML="Close";let o=document.createElement("label");o.innerHTML="Title: ";let l=document.createElement("p");l.classList.add("popup-header"),l.innerHTML="Create Project",e.appendChild(l),e.appendChild(o),e.appendChild(t),e.appendChild(d),e.appendChild(n),e.setAttribute("id","projectcreatepopup");let i=document.getElementById("body"),r=document.getElementById("container");i.insertBefore(e,r)})();let t=document.getElementById("close");document.getElementById("addprojectbutton").addEventListener("click",a),t.addEventListener("click",R)},a=()=>{let t=document.getElementById("projecttitle");if(t.value){let d=new e(t.value);o.push(d),R(),c(d)}},c=e=>{let t=u(e.title),d=document.getElementById("projectcont"),n=document.getElementById("addproject");d.insertBefore(t,n)},u=e=>{let t=document.createElement("div");return t.classList.add("button"),t.innerHTML=e,t.setAttribute("data-attr",e),t.addEventListener("click",s),t},s=e=>{let t=p(e.target);t&&m(t)},p=e=>{console.log("gambaro");for(var t=0;t<o.length;t++)if(o[t].title==e.getAttribute("data-attr"))return o[t]},m=e=>{console.log("Entered Render Todos"),T(),N();let t=document.getElementById("todocont");for(var d=0;d<e.todos.length;d++){let n=H(e.todos[d],e);t.appendChild(n)}let n=E(e);n.addEventListener("click",B);let o=g(e);o.addEventListener("click",y);let l=C(e);l.addEventListener("click",h),t.appendChild(n),t.appendChild(o),t.appendChild(l),console.log("Render Todos Exited")},h=e=>{(e=>{let t=document.createElement("div");t.classList.add("popup");let d=document.createElement("input");d.setAttribute("id","projecttitle"),d.type="text";let n=document.createElement("button");n.setAttribute("id","editprojectbutton"),n.setAttribute("data-attr",e.title),n.innerHTML="Submit";let o=document.createElement("button");o.setAttribute("id","close"),o.innerHTML="Close";let l=document.createElement("label");l.innerHTML="Title: ";let i=document.createElement("p");i.classList.add("popup-header"),i.innerHTML="Edit Project",t.appendChild(i),t.appendChild(l),t.appendChild(d),t.appendChild(n),t.appendChild(o),t.setAttribute("id","projecteditpopup");let r=document.getElementById("body"),a=document.getElementById("container");r.insertBefore(t,a)})(p(e.target)),document.getElementById("editprojectbutton").addEventListener("click",b),document.getElementById("close").addEventListener("click",R)},b=e=>{let t=p(e.target),d=document.getElementById("projecttitle");if(console.log(t),d.value)return n=t,o=d.value,n.title=o,l(),void R();var n,o},E=e=>{let t=document.createElement("button");return t.classList.add("button"),t.innerHTML="Add Todos",t.setAttribute("data-attr",e.title),t},g=e=>{let t=document.createElement("button");return t.classList.add("button"),t.innerHTML="Delete Project",t.setAttribute("data-attr",e.title),t},C=e=>{let t=document.createElement("button");return t.classList.add("button"),t.innerHTML="Edit Project",t.setAttribute("data-attr",e.title),t},y=e=>{let t=p(e.target);v(t)&&(L(t),T(),N()),console.log(o)},L=e=>{let t=document.getElementById("projectcont").children;A(t,e.title).remove()},A=(e,t)=>{for(var d=0;d<e.length;d++)if(e[d].getAttribute("data-attr")==t)return e[d]},v=e=>{for(var t=0;t<o.length;t++)if(o[t].title==e.title)return o.splice(t,1),"Success"},T=()=>{console.log("Remove Todos Entered");let e=document.getElementById("todocont");for(;e.firstChild;)e.removeChild(e.lastChild);console.log("Remove Todos Exited")},B=e=>{(()=>{let e=document.createElement("div");e.classList.add("popup");let t=document.createElement("input");t.setAttribute("id","todotitle"),t.type="text";let d=document.createElement("label");d.setAttribute("id","titlelabel"),d.innerHTML="Title: ";let n=document.createElement("input");n.setAttribute("id","tododescription"),n.type="text";let o=document.createElement("label");o.setAttribute("id","descriptionlabel"),o.innerHTML="Description: ";let l=document.createElement("input");l.setAttribute("id","tododuedate"),l.type="date";let i=document.createElement("label");i.setAttribute("id","duedatelabel"),i.innerHTML="Duedate: ";let r=document.createElement("label");r.setAttribute("id","prioritylabel"),r.innerHTML="Priority(1-10): ";let a=document.createElement("input");a.setAttribute("id","todopriority"),a.type="number";let c=document.createElement("input");c.setAttribute("id","todonotes"),c.type="text";let u=document.createElement("label");u.setAttribute("id","noteslabel"),u.innerHTML="Notes: ";let s=document.createElement("button");s.innerHTML="Submit",s.setAttribute("id","addtodobutton");let p=document.createElement("button");p.setAttribute("id","close"),p.innerHTML="Close";let m=document.createElement("p");m.classList.add("popup-header"),m.innerHTML="Create Todo",e.appendChild(m),e.appendChild(d),e.appendChild(t),e.appendChild(document.createElement("br")),e.appendChild(o),e.appendChild(n),e.appendChild(document.createElement("br")),e.appendChild(i),e.appendChild(l),e.appendChild(document.createElement("br")),e.appendChild(r),e.appendChild(a),e.appendChild(document.createElement("br")),e.appendChild(u),e.appendChild(c),e.appendChild(document.createElement("br")),e.appendChild(s),e.appendChild(p),e.setAttribute("id","todocreatepopup");let h=document.getElementById("body"),b=document.getElementById("container");h.insertBefore(e,b)})();let t=p(e.target),d=document.getElementById("addtodobutton");d.setAttribute("data-attr",t.title),d.addEventListener("click",f),document.getElementById("close").addEventListener("click",R)},f=e=>{let d=I();if(d){let n=new t(d[0],d[1],d[2],d[3],d[4]),o=p(e.target);o.todos.push(n),R(),console.log(o.todos),m(o)}else console.log("Failed.")},I=()=>{let e=document.getElementById("todotitle"),t=document.getElementById("tododescription"),d=document.getElementById("tododuedate"),n=document.getElementById("todopriority"),o=document.getElementById("todonotes");return!!(e.value&&t.value&&d.value&&n.value>0&&n.value<=10&&o.value)&&[e.value,t.value,d.value,n.value,o.value]},H=(e,t)=>{let d=document.createElement("button");return d.innerHTML=e.title,d.setAttribute("todo-hash",e.hash),d.setAttribute("project",t.title),d.classList.add("button"),d.addEventListener("click",M),d},M=e=>{N();let t=document.getElementById("showcont"),n=D(e.target),o=P(n,e.target),l=d(o);t.appendChild(l);let i=document.getElementById("deletetodobutton");i.setAttribute("project",n.title),i.setAttribute("todo-hash",o.hash),i.addEventListener("click",x);let r=document.getElementById("edittodobutton");r.setAttribute("project",n.title),r.setAttribute("todo-hash",o.hash),r.addEventListener("click",J),j(n,o)},j=(e,t)=>{let d=document.createElement("button");d.classList.add("button"),d.setAttribute("todo-hash",t.hash),d.setAttribute("project",e.title),d.innerHTML="Completed",t.completed?d.style.backgroundColor="green":d.style.backgroundColor="red",d.addEventListener("click",k),document.getElementById("showcont").appendChild(d)},k=e=>{let t=D(e.target),d=P(t,e.target);var n;console.log(typeof d),1==(n=d).completed?n.completed=!1:n.completed=!0;let o=e.target;d.completed?o.style.backgroundColor="green":o.style.backgroundColor="red"},x=e=>{let t=D(e.target),d=P(t,e.target);N(),w(d,t),S(d).remove()},S=e=>{let t=document.getElementById("todocont").children;for(var d=0;d<t.length;d++)if(t[d].getAttribute("todo-hash")==e.hash)return t[d]},w=(e,t)=>{for(var d=0;d<t.todos.length;d++)if(t.todos[d].hash==e.hash)return t.todos.splice(d,1),"Successfully deleted Todo"},D=e=>{for(var t=0;t<o.length;t++)if(o[t].title==e.getAttribute("project"))return o[t]},P=(e,t)=>{for(var d=0;d<e.todos.length;d++)if(e.todos[d].hash==t.getAttribute("todo-hash"))return e.todos[d]},N=()=>{let e=document.getElementById("showcont");for(;e.firstChild;)e.removeChild(e.lastChild)},R=()=>{let e=document.getElementsByClassName("popup");for(var t=0;t<e.length;t++)e[t].remove()},J=e=>{let t=D(e.target);((e,t)=>{let d=document.createElement("div");d.classList.add("popup");let n=document.createElement("input");n.setAttribute("id","todotitle"),n.type="text";let o=document.createElement("label");o.setAttribute("id","titlelabel"),o.innerHTML="Title: ";let l=document.createElement("input");l.setAttribute("id","tododescription"),l.type="text";let i=document.createElement("label");i.setAttribute("id","descriptionlabel"),i.innerHTML="Description: ";let r=document.createElement("input");r.setAttribute("id","tododuedate"),r.type="date";let a=document.createElement("label");a.setAttribute("id","duedatelabel"),a.innerHTML="Duedate: ";let c=document.createElement("label");c.setAttribute("id","prioritylabel"),c.innerHTML="Priority(1-10): ";let u=document.createElement("input");u.setAttribute("id","todopriority"),u.type="number";let s=document.createElement("input");s.setAttribute("id","todonotes"),s.type="text";let p=document.createElement("label");p.setAttribute("id","noteslabel"),p.innerHTML="Notes: ";let m=document.createElement("button");m.innerHTML="Submit",m.setAttribute("id","edittodobutton"),m.setAttribute("todo-hash",t.hash),m.setAttribute("project",e.title);let h=document.createElement("button");h.setAttribute("id","close"),h.innerHTML="Close";let b=document.createElement("p");b.classList.add("popup-header"),b.innerHTML="Edit Todo",d.appendChild(b),d.appendChild(o),d.appendChild(n),d.appendChild(document.createElement("br")),d.appendChild(i),d.appendChild(l),d.appendChild(document.createElement("br")),d.appendChild(a),d.appendChild(r),d.appendChild(document.createElement("br")),d.appendChild(c),d.appendChild(u),d.appendChild(document.createElement("br")),d.appendChild(p),d.appendChild(s),d.appendChild(document.createElement("br")),d.appendChild(m),d.appendChild(h),d.setAttribute("id","todoeditpopup");let E=document.getElementById("body"),g=document.getElementById("container");E.insertBefore(d,g)})(t,P(t,e.target)),document.getElementById("edittodobutton").addEventListener("click",O),document.getElementById("close").addEventListener("click",R)},O=e=>{let t=D(e.target),n=P(t,e.target),o=I();var l,i,r,a,c,u;o&&(l=n,i=o[0],r=o[1],a=o[2],c=o[3],u=o[4],l.title=i,l.description=r,l.duedate=a,l.priority=c,l.notes=u,l.hash=l.title+l.description+l.duedate+l.priority+l.notes,console.log("Good"),R(),console.log("No popups chikom"),m(t),console.log("Todo render issue"),((e,t)=>{N();let n=document.getElementById("showcont"),o=d(t);n.appendChild(o);let l=document.getElementById("deletetodobutton");l.setAttribute("project",e.title),l.setAttribute("todo-hash",t.hash),l.addEventListener("click",x);let i=document.getElementById("edittodobutton");i.setAttribute("project",e.title),i.setAttribute("todo-hash",t.hash),i.addEventListener("click",J),j(e,t)})(t,n),console.log("Todo info render issue"))};l(),window.addEventListener("beforeunload",(e=>{var t;t=o,localStorage.setItem("projects",JSON.stringify(t))}))})();